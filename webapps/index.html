<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>SWB Social Mobile</title>
 <script type="text/javascript" src="cordova.js"></script>
 <script type="text/javascript" src="js/index.js"></script>

<script type="text/javascript">
 //// <![CDATA[
    // http://diveintohtml5.info/storage.html
    function supports_html5_storage()
    {
        try
        {
            return 'localStorage' in window && window['localStorage'] !== null;
        }
        catch (e)
        {
            return false;
        }
    }
    
    function getMainContent()
    {
        if(supports_html5_storage())
        {
            var url2connect = localStorage.getItem("url2connect");
            if(url2connect!=null && url2connect.trim().length>0)
            {
                document.getElementById("mainContent").innerHTML = document.getElementById("iframeContent").innerHTML;
            }
        }else{
            document.getElementById("mainContent").innerHTML = document.getElementById("captureUrl").innerHTML;
        }
    }

    function setUrl2connect()
    {
        var url2connect=document.getElementById('url2set').value;
        if(supports_html5_storage())
        {
            // Saving url2connect
            localStorage.setItem("url2connect", url2connect);     
            document.getElementById("mainContent").innerHTML = document.getElementById("iframeContent").innerHTML;
        }
    }

    // Prueba de lectura y escritura
    function resetUrl2connect()
    {      
        var obj = document.getElementById('url2connect');

        if(supports_html5_storage())
        {
            // Reseteamos
            localStorage.setItem("url2connect", "");
            obj.innerHTML = "";
        }
        else obj.innerHTML = '<span style="color: red;">ERROR</span>';
    }
 
    //Getting the url to connect
    function getUrl2connect()
    {
        var obj = document.getElementById('url2connect');

        if(supports_html5_storage())
        {
            // Reading the storaged url
            var url2connect = localStorage.getItem("url2connect");

            // Establecemos el número
            obj.innerHTML = url2connect;
        }
        else obj.innerHTML = '<span style="color: red;">ERROR</span>';
    }
 
// ]]>
</script>


<style type="text/css" media="all">
.novisible{
    visibility: hidden;
}

.visible{
    visibility: visible;
}
</style>


</head>
<body>


<div id="main">
    <div id="mainContent">	
          <script type="text/javascript">// <![CDATA[
            getMainContent();
        // ]]>  
        </script>
    </div>
 </div>    
    
<div id="iframe" class="novisible">
    <div id="iframeContent">
        <iframe src="http://www.google.com" style="width: 100%; height: 100%" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
    </div>
</div>
    
<div id="captureUrl" class="novisible">
    <div id="captureUrlContent">
        <form>
            Ruta de servidor:<input type="url" name="url2set">
            <input type="button" value="Conectar" onClick="setUrl2connect();">
        </form>
    </div>
</div>
    
 
</body>
</html>
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>SWB Social Mobile</title>
 <script type="text/javascript" src="cordova.js"></script>
 <script type="text/javascript" src="js/index.js"></script>

<script type="text/javascript">
    <!--
    function supports_html5_storage()
    {
        try
        {
            return 'localStorage' in window && window['localStorage'] !== null;
        }
        catch (e)
        {
            return false;
        }
    }
    
    function getMainContent()
    {
        if(supports_html5_storage())
        {
            var url2connect = localStorage.getItem("url2connect");
            alert("Valor de url2connect al Inicio Jorge:"+url2connect);
            if(url2connect!=null && url2connect.trim().length>0)
            {
                //alert("entra getMainContent-1.1:"+document.getElementById("url2set").src);
                //document.getElementById("iframe").style.visibility = "visible";
                //document.all.iframe.style.visibility = "visible";
                //document.all.iframeContent.style.visibility = "visible";
                //alert("entra getMainContent-1.2:"+document.all.iframeContent.style.visibility);
                //document.getElementById("mainContent").innerHTML = document.getElementById("iframeContent").innerHTML;
                document.getElementById("mainContent").innerHTML ="<iframe src=\""+url2connect+"\" style=\"width: 100%; height: 100%\" scrolling=\"no\" marginwidth=\"0\" marginheight=\"0\" frameborder=\"0\"></iframe>";
                //document.all.mainContent.style.visibility = "visible";
                resetUrl2connect();
            }else{
                var captureUrlContent=document.getElementById("captureUrlContent").innerHTML;
                //alert("entra getMainContent-JJ2:"+captureUrlContent);
                //document.getElementById("mainContent").innerHTML = document.getElementById("captureUrlContent").innerHTML;
                //var captureUrlContent = document.getElementById('captureUrl').innerHTML;
                //alert("captureUrlContentJ:"+captureUrlContent);
                document.getElementById("mainContent").innerHTML = captureUrlContent;
            }
        }
    }

    function setUrl2connect()
    {
        var url2connect=document.getElementById("url2set").value;
        var myForm=document.forms["url2redirect"];
        var element=myForm.elements["url2set"];
        //var url2connect=document.getElementsByClassName("url2set")[1].value;
        alert("entra setUrl2connect-1:"+element.value);
        if(supports_html5_storage())
        {
            // Saving url2connect
            localStorage.setItem("url2connect", url2connect);   
            alert("entra setUrl2connect-2-Graba:"+localStorage.getItem("url2connect"));
            document.getElementById("mainContent").innerHTML = document.getElementById("swbsocialIframe").innerHTML;
        }
    }

    // Prueba de lectura y escritura
    function resetUrl2connect()
    {      
        if(supports_html5_storage())
        {
            // Reseteamos
            localStorage.setItem("url2connect", "");
        }
    }
 
    //Getting the url to connect
    function getUrl2connect()
    {
        var obj = document.getElementById('url2connect');

        if(supports_html5_storage())
        {
            // Reading the storaged url
            var url2connect = localStorage.getItem("url2connect");

            // Establecemos el número
            obj.innerHTML = url2connect;
        }
        else obj.innerHTML = '<span style="color: red;">ERROR</span>';
    }
    
    function setUrl(form)
    {
        if(supports_html5_storage()){
            alert('va a poner Jorge3:'+form.url2set.value);
            localStorage.setItem('url2connect', form.url2set.value);
            alert('Puso:'+localStorage.getItem('url2connect'));
            getMainContent();
        }
    }
    
    
-->
</script>


<style type="text/css" media="all">
.novisible{
    visibility: hidden;
}

.visible{
    visibility: visible;
}
</style>


</head>
<body>

<div id="swbsocialIframe" class="novisible">
    <div id="swbsocialIframeContent">
        <iframe src="http://www.infotec.com.mx" style="width: 100%; height: 100%" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>";
    </div>
</div>    
    
    
<div id="captureUrl" class="novisible">
    <div id="captureUrlContent">
        <form name="url2redirect">
            Ruta de servidor:<input type="url" name="url2set" id="url2set">
            <input type="button" value="Conectar" onClick="setUrl(this.form);return false;"> 
        </form>
    </div>
</div>
    
    
 <div id="main">
    <div id="mainContent">	
          <script type="text/javascript">// <![CDATA[
            getMainContent();
        // ]]>  
        </script>
    </div>
 </div>  
    
 
</body>
</html>